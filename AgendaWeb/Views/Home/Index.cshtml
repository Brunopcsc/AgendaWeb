@model IEnumerable<AgendaWeb.Models.Contato>

@{
    ViewBag.Title = "Home";
}

<h1>Minha Agenda</h1>



<a class="botaoadd create">Adicionar<hr /></a>
<!--
<form asp-controller="Home" asp-action="Index" name='form' method="get">
    <p>
        <input class="form-control" name="SearchString" list="datalistOptions" onchange="submitform()" placeholder="Pesquisar...">

    </p>
</form> -->
<table id="tabela" class="table display nowrap order-column" style="width:100%">

    <thead class="thead-light">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Nome)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Email)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TelefoneRes)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TelefoneCom)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.Celular)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.OutroNum)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.Cidade)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.Cep)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.Endereco)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.Numero)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.Bairro)
            </th>
            <th>Comandos</th>
        </tr>
    </thead>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Nome)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.TelefoneRes)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.TelefoneCom)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Celular)
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.OutroNum)
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.Cidade)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Cep)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Endereco)
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.Numero)
            </td>

            <td>
                @Html.DisplayFor(modelItem => item.Bairro)
            </td>
            <td class="nav">
                <a class="botaoedit edit" data-id="@item.Contato_id"></a>
                @Html.ActionLink("Detalhes", "Details", new { id = item.Contato_id }, new { @class = "botaodetalhes details" })
                <a class="botaoremover delete" data-id="@item.Contato_id"></a>

            </td>
        </tr>
    }

</table>


<div id="modal" class="modal fade" role="dialog">
</div>

@section scripts{

    <script src="~/Scripts/jquery.validate.js" type="text/javascript"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.js"></script>
    <script src="//cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
    <script src="//cdn.datatables.net/fixedcolumns/3.3.2/js/dataTables.fixedColumns.min.js"></script>
    <script>
        $(document).ready(function () {

            var table = $('#tabela').DataTable({
                scrollY: "300px",
                scrollX: true,
                scrollCollapse: true,
                paging: false,
                fixedColumns: {
                    leftColumns: 1,
                    rightColumns: 1
                },
                "language": {
                    "search": "",
                    "info": ""
                }
            });
            $('.dataTables_filter input').attr("placeholder", "Pesquisar...");
        });</script>
    <script>
        $(function () {

            $(".edit").click(function () {
                var id = $(this).attr("data-id");
                $("#modal").load("/Home/Edit?id=" + id, function () {
                    $("#modal").modal();
                })
            });

            $(".delete").click(function () {
                var id = $(this).attr("data-id");
                $("#modal").load("/Home/Delete?id=" + id, function () {
                    $("#modal").modal();
                })
            });

            $(".create").click(function () {
                $("#modal").load("/Home/Create", function () {
                    $("#modal").modal();
                })
            });

        })
    </script>
}
